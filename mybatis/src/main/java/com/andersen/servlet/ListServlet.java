package com.andersen.servlet;import com.andersen.bean.Message;import com.andersen.core.Response;import javax.print.attribute.standard.Media;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.io.PrintWriter;import java.sql.*;import java.util.ArrayList;import java.util.List;import static java.lang.Class.*;public class ListServlet extends HttpServlet {    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        resp.setContentType("text/html; charset=UTF-8");        try {            Class.forName("com.mysql.cj.jdbc.Driver");            Connection connection = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/mybatis?serverTimezone=UTC","root",                    "root");            String sql = "select ID,COMMAND,DESCRIPTION,CONTENT from message";            PreparedStatement statement = connection.prepareStatement(sql);            ResultSet rs = statement.executeQuery();            List<Message> messageList = new ArrayList<Message>();            while(rs.next()){                Message message = new Message();                message.setId(rs.getString("id"));                message.setCommand(rs.getString("command"));                message.setContent(rs.getString("content"));                message.setDescription(rs.getString("description"));                messageList.add(message);            }            PrintWriter printWriter = resp.getWriter();            Response response = new Response();            response.setDATA(messageList);            printWriter.write(response.toJsonStr());        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            e.printStackTrace();        }    }    @Override    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        this.doGet(req,resp);    }}